# mlibc PSE51 æµ‹è¯•å¥—ä»¶

æœ¬ç›®å½•åŒ…å«äº†é’ˆå¯¹ mlibc åº“çš„ PSE51 (IEEE 1003.13-2003) æ ‡å‡†å…¼å®¹æ€§æµ‹è¯•ç”¨ä¾‹ã€‚

## å¿«é€Ÿå¼€å§‹

```bash
# æ„å»ºæ‰€æœ‰æµ‹è¯•
./build

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./test

# ä»…æ„å»º/æµ‹è¯• PC ç‰ˆæœ¬
./build pc
./test pc

# ä»…æ„å»º/æµ‹è¯•åµŒå…¥å¼ç‰ˆæœ¬
./build embedded
./test embedded

# è¿è¡Œç‰¹å®šæµ‹è¯•
./test pc assert      # ä»…è¿è¡Œ PC ç‰ˆ assert æµ‹è¯•
./test embedded string # ä»…è¿è¡ŒåµŒå…¥å¼ç‰ˆ string æµ‹è¯•
```

## ç›®å½•ç»“æ„

```
testcases/
â”œâ”€â”€ build          # æ„å»ºè„šæœ¬
â”œâ”€â”€ test           # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ Makefile       # ä¸» Makefile
â”œâ”€â”€ test_colors.h  # å½©è‰²è¾“å‡ºæ”¯æŒ
â”œâ”€â”€ PSE51.md       # PSE51 æ ‡å‡†æ”¯æŒè¯¦æƒ…
â”œâ”€â”€ assert/        # assert.h æµ‹è¯•
â”œâ”€â”€ ctype/         # ctype.h æµ‹è¯•
â”œâ”€â”€ fcntl/         # fcntl.h æµ‹è¯•
â”œâ”€â”€ locale/        # locale.h æµ‹è¯•
â”œâ”€â”€ signal/        # signal.h æµ‹è¯•
â”œâ”€â”€ stat/          # sys/stat.h æµ‹è¯•
â”œâ”€â”€ stdio/         # stdio.h æµ‹è¯•
â”œâ”€â”€ stdlib/        # stdlib.h æµ‹è¯•
â”œâ”€â”€ string/        # string.h æµ‹è¯•
â”œâ”€â”€ time/          # time.h æµ‹è¯•
â”œâ”€â”€ unistd/        # unistd.h æµ‹è¯•
â””â”€â”€ utsname/       # sys/utsname.h æµ‹è¯•
```

## æµ‹è¯•ç‰¹æ€§

- **åŒå¹³å°æ”¯æŒ**: æ¯ä¸ªæµ‹è¯•éƒ½æ”¯æŒ PC å’ŒåµŒå…¥å¼ï¼ˆQEMU RISC-V 32ï¼‰ç¯å¢ƒ
- **å½©è‰²è¾“å‡º**: æµ‹è¯•ç»“æœä½¿ç”¨å½©è‰²æ ‡è®°ï¼Œç»¿è‰² âœ“ è¡¨ç¤ºé€šè¿‡ï¼Œçº¢è‰² âœ— è¡¨ç¤ºå¤±è´¥
- **å®Œæ•´è¦†ç›–**: è¦†ç›– PSE51 æ ‡å‡†è¦æ±‚çš„æ‰€æœ‰å‡½æ•°å’ŒåŠŸèƒ½
- **POSIX å…¼å®¹**: æµ‹è¯•ç”¨ä¾‹è®¾è®¡éµå¾ª POSIX è§„èŒƒ

## ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ç”¨æ³•

```bash
./build         # æ„å»ºæ‰€æœ‰æµ‹è¯•ï¼ˆPC + åµŒå…¥å¼ï¼‰
./test          # è¿è¡Œæ‰€æœ‰æµ‹è¯•

./build help    # æŸ¥çœ‹æ„å»ºå¸®åŠ©
./test help     # æŸ¥çœ‹æµ‹è¯•å¸®åŠ©
```

### é«˜çº§ç”¨æ³•

#### ä»…æµ‹è¯•ç‰¹å®šå¹³å°
```bash
./build pc      # ä»…æ„å»º PC æµ‹è¯•
./test pc       # ä»…è¿è¡Œ PC æµ‹è¯•

./build embedded # ä»…æ„å»ºåµŒå…¥å¼æµ‹è¯•
./test embedded  # ä»…è¿è¡ŒåµŒå…¥å¼æµ‹è¯•
```

#### æµ‹è¯•ç‰¹å®šæ¨¡å—
```bash
./test pc stdio    # ä»…è¿è¡Œ PC ç‰ˆ stdio æµ‹è¯•
./test all string  # è¿è¡Œ string çš„æ‰€æœ‰ç‰ˆæœ¬æµ‹è¯•
```

### ä½¿ç”¨ Makefile

```bash
make pc-build       # æ„å»º PC æµ‹è¯•
make embedded-build # æ„å»ºåµŒå…¥å¼æµ‹è¯•
make test-all       # è¿è¡Œæ‰€æœ‰æµ‹è¯•
```

## æµ‹è¯•è¾“å‡ºè¯´æ˜

- ğŸŸ¦ è“è‰²: æµ‹è¯•å¼€å§‹
- âœ… ç»¿è‰²: æµ‹è¯•é€šè¿‡
- âŒ çº¢è‰²: æµ‹è¯•å¤±è´¥
- âš ï¸ é»„è‰²: è­¦å‘Šæˆ–è·³è¿‡

## ç¯å¢ƒè¦æ±‚

### PC æµ‹è¯•è¦æ±‚
- æ”¯æŒ C99 æ ‡å‡†çš„ç¼–è¯‘å™¨
- POSIX å…¼å®¹çš„æ“ä½œç³»ç»Ÿ

### åµŒå…¥å¼æµ‹è¯•è¦æ±‚
- RISC-V 32ä½äº¤å‰ç¼–è¯‘å·¥å…·é“¾
- QEMU RISC-V ç³»ç»Ÿæ¨¡æ‹Ÿå™¨

```bash
# Ubuntu/Debian å®‰è£…
sudo apt-get install gcc-riscv64-unknown-elf qemu-system-misc
```

## æµ‹è¯•è¦†ç›–ç‡

- âœ… **å®Œå…¨è¦†ç›–**: stdio.h, stdlib.h, string.h, ctype.h, assert.h
- âœ… **åŸºæœ¬è¦†ç›–**: time.h, signal.h, fcntl.h, unistd.h
- âœ… **éƒ¨åˆ†è¦†ç›–**: sys/stat.h, locale.h, sys/utsname.h

## ç›¸å…³æ–‡æ¡£

- [PSE51.md](PSE51.md) - PSE51 æ ‡å‡†æ¥å£å®ç°çŠ¶æ€
- [mlibc CLAUDE.md](../CLAUDE.md) - mlibc é¡¹ç›®æ¦‚è¿°